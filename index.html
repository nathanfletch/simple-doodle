<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <title>Doodle</title>
  </head>
  <body>
    <canvas id="doodle-canvas"></canvas>
    <script>
      const canvas = document.getElementById("doodle-canvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      ctx.strokeStyle = "blue";
      ctx.lineJoin = "round";
      ctx.lineCap = "round";
      ctx.lineWidth = 3;

      let drawing = false;
      // let mode = "";
      //line:
      //width, numlines,
      //circle:

      let x = null;
      let y = null;
      let rotationOffset = 0;
      let rotationSpeed = 0.08;
      let hue = 0;
      let radius = 10;
      let radiusIncreasing = true;
      let numLines = 3;

      function draw(e) {
        if (!drawing) return;
        //switch statement to check all our state?
        // simpleLine();
        // multiLine(5, 20);
        console.log(`hue: ${hue}`);
        console.log(`radius: ${radius}`);
        console.log(`numLines: ${numLines}`);
        ctx.strokeStyle = `hsl(${hue}, 100%, 50%)`;
        multiLineCircleRotate(5);

        [x, y] = [e.offsetX, e.offsetY];
        
        if (e.ctrlKey) {
          rotationOffset += rotationSpeed;
        }
        if (e.altKey) {
          hue = (hue + 1) % 360;
          // if (radius > 15 || radius < 5) {
          //   radiusIncreasing = !radiusIncreasing;
          // }
          // radiusIncreasing ? (radius += 0.5) : (radius -= 0.5);
        }

        

        function multiLine(numLines, gap) {
          ctx.beginPath();
          for (let i = 0; i < numLines; i++) {
            ctx.moveTo(x, y + gap * i);
            ctx.lineTo(e.offsetX, e.offsetY + gap * i);
          }
          ctx.stroke();
          [x, y] = [e.offsetX, e.offsetY];
        }

        function multiLineCircleRotate() {
          ctx.beginPath();
          for (let i = 1; i <= numLines; i++) {
            const currentRadians =
              ((rotationOffset + 2) * Math.PI * i) / numLines;
            xOffset = radius * Math.cos(currentRadians);
            yOffset = radius * Math.sin(currentRadians);

            ctx.moveTo(x + xOffset, y + yOffset);
            ctx.lineTo(e.offsetX + xOffset, e.offsetY + yOffset);
          }
          ctx.stroke();
        }
      }

      // canvas.addEventListener("mousemove", draw);
      canvas.addEventListener("mousemove", draw);
      canvas.addEventListener("mousedown", (e) => {
        [x, y] = [e.offsetX, e.offsetY];
        drawing = true;
      });
      canvas.addEventListener("mouseup", () => {
        [x, y] = [null, null];
        drawing = false;
      });
      canvas.addEventListener("mouseout", () => {
        [x, y] = [null, null];
        drawing = false;
      });
      // document.addEventListener("keydown", (e) => {
      //   if(e.key > 0 && e.key < 10);
      //   numLines = e.key;
      // })
    </script>
  </body>
</html>
